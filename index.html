<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRS INFORTAINMENT | GEN 3</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff3b30;
            --bg: #030303;
            --bright: 100%;
        }

        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        body { 
            background: var(--bg); 
            color: white; 
            font-family: 'Space Grotesk', sans-serif; 
            width: 100vw; 
            height: 100vh; 
            overflow: hidden; /* Evita cualquier desplazamiento global */
            filter: brightness(var(--bright));
            position: fixed; /* Fija la vista para evitar scrolls accidentales en móviles */
        }

        /* FONDO DINÁMICO REJILLA 3D */
        .grid-bg {
            position: fixed; inset: 0; z-index: -1;
            background-image: 
                linear-gradient(rgba(255,59,48,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,59,48,0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            perspective: 500px;
            transform: rotateX(60deg) scale(2);
            transform-origin: top;
            opacity: 0.3;
        }

        /* HEADER CON TELEMETRÍA */
        header {
            height: 80px; display: flex; justify-content: space-between; align-items: center;
            padding: 0 40px; background: rgba(0,0,0,0.9);
            border-bottom: 2px solid var(--accent); position: relative; z-index: 2000;
        }
        .brand { 
            font-weight: 700; 
            text-transform: uppercase; 
            font-size: 1.8rem; 
            letter-spacing: -1px; 
        }
        .brand span { color: var(--accent); text-shadow: 0 0 10px var(--accent); font-weight: 300; }

        .v-meter { display: flex; gap: 3px; align-items: flex-end; height: 30px; }
        .v-bar { width: 4px; background: var(--accent); animation: pulse 0.5s infinite alternate; }
        @keyframes pulse { from { height: 5px; } to { height: 25px; } }

        /* CONTENEDOR DE EMISORAS CORREGIDO */
        .main-engine {
            height: calc(100% - 170px); 
            width: 100%;
            display: flex; 
            align-items: center;
            overflow-x: auto; 
            overflow-y: hidden;
            padding: 0 100px; 
            gap: 40px;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }
        .main-engine::-webkit-scrollbar { display: none; }

        /* Espaciador invisible para permitir el centrado de la última tarjeta */
        .main-engine::after {
            content: '';
            min-width: 200px;
            height: 100%;
            flex-shrink: 0;
        }

        .radio-card {
            min-width: 280px; 
            height: 380px; 
            background: #0a0a0a;
            border: 1px solid #1a1a1a; 
            position: relative;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            scroll-snap-align: center; 
            transition: 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
            flex-shrink: 0;
            cursor: pointer;
        }

        .radio-card::before {
            content: ""; position: absolute; top:0; left:0; width: 100%; height: 5px; background: #222;
        }

        .radio-card.active { 
            transform: scale(1.1) translateY(-10px);
            border-color: var(--accent);
            box-shadow: 0 0 40px rgba(255, 59, 48, 0.2);
        }
        .radio-card.active::before { background: var(--accent); box-shadow: 0 0 15px var(--accent); }

        .radio-card img { 
            width: 120px; 
            height: 120px; 
            object-fit: contain; 
            margin-bottom: 30px; 
            filter: grayscale(1); 
            transition: 0.4s; 
        }
        .radio-card.active img { filter: grayscale(0); transform: rotate(-5deg); }
        
        .radio-card p { font-weight: 700; font-size: 1.2rem; color: #444; text-transform: uppercase; }
        .radio-card.active p { color: #fff; letter-spacing: 2px; }

        /* SETUP PANEL */
        #setup-panel {
            position: fixed; top: 80px; left: 0; width: 100%;
            height: 300px; background: rgba(0,0,0,0.98);
            z-index: 1500; transform: translateY(-110%);
            transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            padding: 50px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px;
            pointer-events: none; border-bottom: 2px solid var(--accent);
        }
        #setup-panel.open { transform: translateY(0); pointer-events: auto; }

        .control-item label { display: block; font-size: 0.7rem; color: #888; margin-bottom: 20px; letter-spacing: 3px; font-weight: 700; }
        input[type="range"] { -webkit-appearance: none; width: 100%; height: 4px; background: #333; }
        input[type="range"]::-webkit-slider-thumb { 
            -webkit-appearance: none; width: 20px; height: 40px; background: var(--accent); cursor: pointer;
            clip-path: polygon(0 0, 100% 10%, 100% 90%, 0 100%);
        }

        /* DOCK */
        .dock {
            height: 90px; width: 100%; background: #000;
            display: flex; justify-content: center; align-items: center; gap: 40px;
            border-top: 1px solid #222; position: fixed; bottom: 0; z-index: 2000;
        }
        .nav-btn { 
            width: 100px; height: 50px; background: #0a0a0a; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            clip-path: polygon(15% 0, 100% 0, 85% 100%, 0 100%); transition: 0.3s;
            border: 1px solid #1a1a1a;
        }
        .nav-btn.active { background: var(--accent); transform: skew(-10deg); }
        .nav-btn img { width: 24px; filter: invert(1); }

        #clock { font-weight: 700; font-size: 1.2rem; letter-spacing: 1px; }

    </style>
</head>
<body>

    <div class="grid-bg"></div>

    <header>
        <div class="brand">TRS <span>INFORTAINMENT</span></div>
        <div class="v-meter">
            <div class="v-bar" style="animation-delay: 0.1s"></div>
            <div class="v-bar" style="animation-delay: 0.3s"></div>
            <div class="v-bar" style="animation-delay: 0.2s"></div>
            <div class="v-bar" style="animation-delay: 0.5s"></div>
            <div class="v-bar" style="animation-delay: 0.4s"></div>
        </div>
        <div id="clock">00:00</div>
    </header>

    <div class="main-engine" id="engine">
        <div class="radio-card" onclick="play(this, 'https://27903.live.streamtheworld.com/LOS40_SANTANDER.mp3', '#ff3b30')">
            <img src="https://station-images-prod.radio-assets.com/2160/los40.png"><p>LOS 40</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://stream.zeno.fm/se76qau1hc9uv', '#00f2ff')">
            <img src="https://static-2.ivoox.com/radios/5/3/1/1/3131724191135_XL.jpg"><p>EUROPA FM</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://rockfm-cope-rrcast.flumotion.com/cope/rockfm.mp3', '#ffcc00')">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/01/RockFM_Logo.svg"><p>ROCK FM</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://playerservices.streamtheworld.com/api/livestream-redirect/SER_ASO_MADRID_NORTE.mp3', '#ff9500')">
            <img src="https://images.seeklogo.com/logo-png/49/1/cadena-ser-logo-png_seeklogo-490315.png"><p>CADENA SER</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://madrid-cope-rrcast.flumotion.com/cope/madrid.mp3', '#007aff')">
            <img src="https://cdn.worldvectorlogo.com/logos/cope.svg"><p>COPE</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://stream.zeno.fm/dzqaazsn3p8uv', '#32d74b')">
            <img src="https://www.consejodietistasnutricionistas.com/wp-content/uploads/2024/11/ondacero.jpg"><p>ONDA CERO</p>
        </div>
        <div class="radio-card" onclick="play(this, 'http://streaming.indalteco.net:8002/dial.mp3', '#34c759')">
            <img src="https://i.scdn.co/image/ab6775700000ee85d1a77d44bcc0045017d8b442"><p>CADENA DIAL</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://cadena100-streamers-mp3.flumotion.com/cope/cadena100.mp3', '#ff2d55')">
            <img src="https://www.brandstocker.com/wp-content/uploads/2024/11/CADENA_100_Branding_BrandStocker_06.jpg"><p>CADENA 100</p>
        </div>
        <div class="radio-card" onclick="play(this, 'https://kissfm.kissfmradio.cires21.com/kissfm.mp3', '#e60000')">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/66/Logo_KISS_FM_2023.jpg"><p>KISS FM</p>
        </div>
    </div>

    <div id="setup-panel">
        <div class="control-item">
            <label>AUDIO_GAIN_LEVEL</label>
            <input type="range" min="0" max="1" step="0.01" value="0.5" oninput="player.volume = this.value">
        </div>
        <div class="control-item">
            <label>HUD_BRIGHTNESS</label>
            <input type="range" min="30" max="100" value="100" oninput="setBright(this.value)">
        </div>
        <div style="grid-column: span 2; text-align: center; font-weight: 700; color: var(--accent); cursor: pointer; letter-spacing: 2px;" onclick="toggleSetup(false)">
            [ CLOSE_SYSTEM_KERNEL ]
        </div>
    </div>

    <div class="dock">
        <div class="nav-btn active" id="btn-rad" onclick="toggleSetup(false)">
            <img src="https://cdn-icons-png.flaticon.com/512/727/727218.png">
        </div>
        <div class="nav-btn" id="btn-set" onclick="toggleSetup(true)">
            <img src="https://cdn-icons-png.flaticon.com/512/2040/2040504.png">
        </div>
    </div>

    <audio id="player"></audio>

    <script>
        const player = document.getElementById('player');
        const setup = document.getElementById('setup-panel');

        function play(el, url, color) {
            const isActive = el.classList.contains('active');
            
            // Quitar clase activa a todos
            document.querySelectorAll('.radio-card').forEach(c => c.classList.remove('active'));

            if(isActive) {
                player.pause();
                document.documentElement.style.setProperty('--accent', '#ff3b30');
            } else {
                el.classList.add('active');
                document.documentElement.style.setProperty('--accent', color);
                player.src = url;
                player.play();
                
                // Centrado suave corregido
                el.scrollIntoView({ 
                    behavior: 'smooth', 
                    inline: 'center', 
                    block: 'nearest' 
                });
            }
        }

        function toggleSetup(open) {
            if(open) {
                setup.classList.add('open');
                document.getElementById('btn-set').classList.add('active');
                document.getElementById('btn-rad').classList.remove('active');
            } else {
                setup.classList.remove('open');
                document.getElementById('btn-set').classList.remove('active');
                document.getElementById('btn-rad').classList.add('active');
            }
        }

        function setBright(v) { 
            document.documentElement.style.setProperty('--bright', v + '%'); 
        }

        // Reloj en tiempo real
        setInterval(() => {
            const d = new Date();
            document.getElementById('clock').innerText = d.getHours().toString().padStart(2,'0') + ":" + d.getMinutes().toString().padStart(2,'0');
        }, 1000);
    </script>
</body>
</html>